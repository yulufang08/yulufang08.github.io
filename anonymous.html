<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title data-i18n="anonymousTitle">Anonymous Feedback</title>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon_io/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon_io/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="images/favicon_io/apple-touch-icon.png">
  <link rel="stylesheet" href="styles.css">
</head>
<body class="js-loading">
  <header class="site-header">
    <nav class="nav" style="justify-content: center;">
      <a href="index.html" class="nav-brand" data-section="home">Yulu Fang</a>
      <div class="header-actions" style="margin-left: auto;">
        <button type="button" class="btn-icon btn-theme" aria-label="Toggle theme">
          <span class="theme-icon sun" aria-hidden="true">☀</span>
          <span class="theme-icon moon" aria-hidden="true">☽</span>
        </button>
      </div>
    </nav>
  </header>

  <main class="main page-anonymous">
    <h1 class="section-title" data-i18n="anonymousTitle">Anonymous Feedback</h1>
    <p class="section-content" data-i18n="anonymousIntro">
      Anyone can anonymously send suggestions, ideas, or feedback. Open this page in a private/incognito window if you prefer.
    </p>

    <div id="form-wrap">
      <form id="anonymous-form" class="section-content">
        <div class="form-group">
          <label for="message" data-i18n="anonymousLabel">Your message (optional)</label>
          <textarea id="message" name="message" rows="6" placeholder="Type your suggestion…"></textarea>
        </div>
        <button type="submit" class="btn-submit" data-i18n="anonymousSubmit">Submit</button>
      </form>
    </div>

    <div id="success-msg" class="message-success" style="display: none;" data-i18n="anonymousSuccess">
      Thank you for your feedback!
    </div>

    <a href="index.html" class="back-link" data-i18n="anonymousBack">Back to home</a>
  </main>

  <footer class="site-footer">
    <p data-i18n="footerNote">Feel free to send feedback via Anonymous Feedback.</p>
  </footer>

  <script src="i18n.js"></script>
  <script>
    (function () {
      const THEME_KEY = 'theme';
      function getTheme() {
        var stored = localStorage.getItem(THEME_KEY);
        if (stored === 'dark' || stored === 'light') return stored;
        return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      }
      function setTheme(theme) {
        if (theme !== 'dark' && theme !== 'light') return;
        localStorage.setItem(THEME_KEY, theme);
        document.documentElement.setAttribute('data-theme', theme === 'dark' ? 'dark' : '');
      }
      function toggleTheme() {
        setTheme(getTheme() === 'dark' ? 'light' : 'dark');
      }
      document.documentElement.setAttribute('data-theme', getTheme() === 'dark' ? 'dark' : '');
      document.querySelector('.btn-theme')?.addEventListener('click', toggleTheme);
    })();
  </script>
  <script>
    (function () {
      var form = document.getElementById('anonymous-form');
      var formWrap = document.getElementById('form-wrap');
      var successMsg = document.getElementById('success-msg');
      var textarea = document.getElementById('message');

      function applyPlaceholder() {
        if (window.i18n && textarea) {
          textarea.placeholder = window.i18n.t('anonymousPlaceholder');
        }
      }
      if (window.i18n) {
        applyPlaceholder();
      }

      form.addEventListener('submit', function (e) {
        e.preventDefault();
        var message = (textarea && textarea.value) ? textarea.value.trim() : '';
        console.log('Anonymous feedback:', message || '(empty)');
        formWrap.style.display = 'none';
        successMsg.style.display = 'block';
      });
    })();
  </script>
</body>
</html>
